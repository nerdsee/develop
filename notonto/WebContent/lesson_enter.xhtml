<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui" xmlns:pm="http://primefaces.org/mobile" template="/WEB-INF/template.xhtml">
	<ui:define name="head">
		<title>Notonto - Lektion</title>
		<ui:fragment rendered="#{brainSession.currentUserLesson.lesson.keyboardLayout=='ES'}">
			<script src="/js/es.js" />
		</ui:fragment>
		<ui:fragment rendered="#{brainSession.currentUserLesson.lesson.keyboardLayout=='DE'}">
			<script src="/js/de.js" />
		</ui:fragment>
		<ui:fragment rendered="#{brainSession.currentUserLesson.lesson.keyboardLayout=='PY'}">
			<script src="/js/py.js" />
		</ui:fragment>
		<ui:fragment rendered="#{brainSession.currentUserLesson.lesson.keyboardLayout=='EN'}">
			<script src="/js/en.js" />
		</ui:fragment>
	</ui:define>
	<ui:define name="content">
		<h1>
			<h:outputText value="#{brainSession.currentUserLesson.lesson.description}" />
		</h1>
		<!-- ### CONTENT-START ### -->
		<p:panelGrid columns="1" styleClass="" id="area_question" widgetVar="area_question" rendered="#{not empty brainSession.currentUserLesson.currentUserItem}">
			<h:form id="answerform">
				<p:focus />
				<h:outputText value="Level #{brainSession.currentUserItem.showLevel}" class="font5" />
				<p:panelGrid columnClasses="atop,atop">
							<h:outputText value="#{brainSession.currentUserItem.item.formattedText}" escape="false" class="font4" rendered="#{brainSession.currentUserLesson.lesson.lessonType==0}" />
							<h:outputText value="#{brainSession.currentUserItem.item.formattedText}" escape="false" class="fontsym ta_center" rendered="#{brainSession.currentUserLesson.lesson.lessonType==1}" />
							<h:outputText value="[#{brainSession.currentUserItem.item.comment}]" class="font4 ta_center" rendered="#{brainSession.currentUserLesson.lesson.lessonType==1 and brainSession.currentUserLesson.config.showPinyin }"/>
							<h:inputText id="answerinput" onkeydown="return checkSpecialChar(event, this);" onkeyup="parse(this)" autocomplete="off" />
							<h:outputText id="pinyin2" value="-" rendered="#{brainSession.currentUserLesson.lesson.keyboardLayout=='PY'}" />
							<h:inputText id="pinyin" value="-" rendered="#{brainSession.currentUserLesson.lesson.keyboardLayout=='PY'}" disabled="true"/>
							<p:commandButton id="submitlink" action="#{brainSession.checkAnswerText}" onclick="updateData(); return true;" value="#{bundle.btn_check}" />
				</p:panelGrid>
				<h:inputHidden id="keyboardLayout" value="#{brainSession.currentUserLesson.lesson.keyboardLayout}" />
				<h:inputHidden id="answerin" value="#{brainSession.answerText}"></h:inputHidden>
			</h:form>
		</p:panelGrid>
		<h:form rendered="#{empty brainSession.currentUserLesson.currentUserItem}">
			<h:panelGrid columns="1" class="w100p">
				<h1>
					<h:outputText value="#{bundle.noitems}" />
				</h1>
				<h2>
					<h:outputText value="#{brainSession.currentUserLesson.nextUserItemTimeDiff}" />
				</h2>
				<p:commandButton class="btn_blue" action="#{brainSession.tryNextUserItem}" value="Refresh" rendered="#{auth.isLoggedIn}" />
			</h:panelGrid>
		</h:form>
		<!-- ### CONTENT-END ### -->
		<p:outputPanel class="content" rendered="#{not empty brainSession.lastUserItem}">
			<!-- ### CONTENT-START ### -->
			<h2>
				<h:outputText value="Richtige Antwort!" />
			</h2>
			<h:panelGrid class="tstd" columns="2" columnClasses="font2,">
				<h:outputText value="Level #{brainSession.lastUserItem.showLevel}" />
				<h:outputText class="" value="" />
				<h:outputText class="font1" value="Wort" />
				<h:outputText class="font1 green" value="#{brainSession.lastUserItem.item.formattedText}" escape="false" rendered="#{brainSession.currentUserLesson.lesson.lessonType==0}" />
				<h:outputText class="font6 green" value="#{brainSession.lastUserItem.item.formattedText}" escape="false" rendered="#{brainSession.currentUserLesson.lesson.lessonType==1}" />
				<h:panelGroup>
					<h:outputText value="MÃ¶gliche Antworten" />
				</h:panelGroup>
				<p:dataList var="answer" value="#{brainSession.lastUserItem.item.answers}" layout="orderedList" class="plainlist font1">
					<h:outputText value="#{answer.text}" class="font1 green" rendered="#{answer.text eq brainSession.lastAnswerText}" />
					<h:outputText value="#{answer.text}" class="font1" rendered="#{answer.text ne brainSession.lastAnswerText}" />
				</p:dataList>
			</h:panelGrid>
			<!-- ### CONTENT-END ### -->
		</p:outputPanel>
	</ui:define>
</ui:composition>
